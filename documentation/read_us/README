BEOS Mail Daemon Replacement v2.0.0 Beta 5

ABOUT:

This is a drop-in replacement for the BeOS Mail Daemon that comes with
BeOS. Its purpose is to be 100% compatible with the original mail_daemon
and to improve it by adding features. The package contains the following
files:

  README
   The file you are reading.

  LICENSE
   Conditions for using/distributing this package.

  DANGER, WILL ROBINSON
   The reasons this is not a final release. You really should read this.

  AGMSBayesianSpamDocumentation
    This lovely folder with no spaces in its name contains the documentation for
    Alexander G. M. Smith's (hence AGMS) brilliant spam filtering software. I've
    never used it (I love reading spam, it's really pretty amusing), but it seems
    pretty cool. Enjoy. And sorry about the spaces.

  SampleSpamDatabase
    This contains a... sample spam database. It goes with the spam server, and
    helps it figure out what is and isn't spam based on spam it has seen before.
    Since it obviously hasn't seen any spam yet when you install this, we give
    you some, already in machine format., Chief Justice Rehnquist: "I can't define
    it, but I know it when I see it."

  libmail.so
   This library provides the backend for the new mail_daemon.
   It will be installed in /boot/beos/system/lib

  mail_daemon
   This is the new replacement Mail Daemon. It will be installed in 
   /boot/beos/system/servers, overwriting the original mail_daemon file.

  BeMail
   This is a new version of BeMail, based on the original, which Be has,
   in their infinite wisdom, open sourced. This provides full multi-account
   support, among other things. Great stuff. It will be installed in
   /boot/beos/apps/BeMail

  E-mail
   This is the new e-mail preferences panel. It will be installed to 
   /boot/beos/preferences, overwriting the original preferences app.

  Addons
   There are a *lot* of addons. These contain much of the functionality
   of the mail daemon, and will be installed in
   /boot/home/config/add-ons/mail_daemon


***********

  Warning:

  Do not keep this and other mail_daemon executables on your HD!
  Because the original Mail Kit uses the mail_daemon's signature
  to find it, having more than one version will cause things to
  randomly fail, when it finds the old version instead of the new.

  This software is beta quality! See the LICENSE file for more 	
  information.

***********

INSTALLATION:

Installation is through a zip file. Be sure to download the correct 
version for your system (PPC or x86). Just unzip the file somewhere
and double click the install.sh icon.

The installer will offer to make a backup or purge old mail daemons.
We STRONGLY RECOMMEND that you accept one or the other of these offers.
The backup/purge proceedure removes all extraneous copies of the
mail_daemon from your system, which is a common cause of other prob-
lems.

To configure the new mail_daemon, open the E-mail preferences app
from your Deskbar menu after installing the package.

USAGE:

Open the E-mail preferences app (BeOS Menu/Preferences/E-mail) and 
configure your accounts. To save all the changes, close the window
by clicking "Save".  To delete an account, select it and press the
DEL key or use the Remove button.

Right click the Deskbar mail icon to access a menu with various options.
Single-click the icon to open your mail inbox. The field about new messages
will be available for selection if you have new messages, and will open a
Tracker query displaying those messages. The Quit option quits the
mail_daemon. You don't want to do this. Right-clicking the Deskbar replicant
while pressing the SHIFT key reveals more options for Sending/Receiving 
emails.

ADDON INSTALLATION:

Add-ons should be installed in /boot/home/config/add-ons/
mail_daemon/ in the subdirectory specified in the add on documentation.
This directory will be automatically created by the installation process.
The distribution contains POP3 (with APOP support), IMAP and SMTP (including 
SMTP-Auth) protocols, as well as Add Fortune, R5 Daemon Filter, and Match
Header filters.

FILTERS:

This release contains four filter addons. To enable them, use E-mail Filters
in preferences, and choose the appropriate direction to apply them in
(specified below), then add that filter. You can add several instances of
the same filter type, although this is only recomended for RuleFilter. Addons
will be executed in the order they appear in the list, and can be reorderd with
a simple drag and drop. To install new filters, follow the directions in 
ADDON INSTALLATION.

 Add Fortune
   This filter adds a random fortune to the bottom of all outgoing e-mail. For
   an example, open your Terminal and type fortune. The database can be
   specified in config, although it is highly reccomended that you use the
   default. For more information on Fortune and its database format, go look
   somewhere on the web.

 R5 Daemon Filter
   This filter executes old style mail daemon filters on inbound messages.
   For more information, see http://www.betips.net/chunga.php?ID=511

 Match Header
   Allows you to filter messages based on an arbitrary header, of a value
   you define. The value can be a regex. So to trash messages containing
   "get rich quick" in the subject, do this: If |Subject| is |*get rich quick*|
   Then |Delete Message| The ||, of course, are just the edges of the
   text boxes. Or, to put it messages from BeUserTalk in ~/mail/beusertalk:
   If |Subject| is |*BeUserTalk*| Then |Move To| |/boot/home/mail/beusertalk|
   This works for any header field. Also, THREAD is a special header
   containing (you guessed it!) the message thread.

 AGMS Bayesian Spam Filter
   This filters out spam. If you want to know more (and you may) more
   documentation can be found in the directory with no spaces in its
   name: AGMSBayesianSpamDocumentation. It even has, unlike this, lots of
   pretty pictures.

HISTORY:

November 27 2002 - v2.0.0b5
- Changed readfoldedline and MIME parsing to both handle lines ending in either CRLF (the standard for Internet mail) or LF (sometimes used for local file storage).  Also handles EOF and errors better.
- Fixed a bug where an empty message sub-part would cause a crash due to BString UnlockBuffer(0) not working for empty strings.  This generally made it crash when it tried to open a malformed message.
- Check for IO errors while writing generic headers and copying existing MIME components.
- New "Reply With" option for the Match Header filter.
- New "Set As Read" option for the Match Header filter.
- Old style name extraction fixed so that StripGook "joe@foo.com (Joe)" will return "Joe" rather than "Jo".
- MessageIO fixed so that it doesn't reread the whole message when doing a SEEK_END, doubles performance when checking for spam!
- Changed AGMSBayesianSpamFilter so that it checks the server's tokenize mode, and if it is JustHeaders then it will only download the headers for spam testing, rather than the entire message.

November 20 2002 - v2.0.0b4
 - Zillions of bug fixes. Too much to mention, really
 - Lots of new features (we will let you have fun discovering them)
 - Profuse apologies for waiting so long to release this
 - Bayesian Spam Filter included

February 12 2002 - v2.0.0b1
  - Serious speed and stability improvements
  - Friendly addon names
  - Finalized, beautified, and FBC-protected API
  - Crash on shutdown bug fixed
  - Colored quotes
  - Attachments work now :P
  - Lots of other things are much better too, but I don't remember them now

November 21 2001 - v2.0.0a2
  - Attachments that used not to be handled are handled now.
  - HTML emails are displayed as the HTML source.
  - Implements all stub functions programs like Postmaster expects (most functions do nothing).
  - Mail handling is much faster
  - Various API improvements
  - Blinking lights support (Notifier)
  - Really improved Deskbar menu! Uses NavMenu. Check it out!
  - Right-clicking the deskbar replicant while pressing the SHIFT key gives more options
  - Central Notification (uses only one Alert for all accounts).
  - Changed links for bug reporting and others
  - Button to enable configuration of the Deskbar Replicant menu
  - Do not crash when opening pre-MDR2 emails
  - Reply to Sender
  - Reply to all
  - Resend/Forward works
  - Better Notifier Filter
  - Better RuleFilter (Descriptive filter names)
  - Better Folder Filter (No more email filename colisions)
  - SMTP Auth now works for real
 
November 06 2001 - v2.0.0 a1
  - Complete rewrite from the ground up
  - Filters
  - BeMail
  - IMAP
  - SMTP Auth
  - POP3 Auth for SMTP
  - Sort emails by thread in Tracker
  - New Mail Kit
  - All sorts of other cool stuff

July 05 2001 - v1.0.0 b5
  - Outgoing (SMTP) mail servers are now configured per account.
  - Leave messages on server now works as expected.
  - You can select your default acount from the Deskbar menu (fixed).
  - Add-on loading problem under BONE seems to be fixed now.
  - Various other bug-fixes and performance improvements.

June 12 2001 - v1.0.0 b4
  - E-mail preferences app completelly rewritten.  Now it is cleaner,
    more intuitive, and font sensitive!  Please send us suggestions for
    improving it.
  - Added buttons to create/erase accounts.
  - The Mail Status window now remembers its size and position.
  - Option to never show the Mail Status window.
  - More bug fixes. More error checking is now being done.
  - First version of the filter API.
  - Some brand new bugs for you to play with. :)
  - The old mail_daemon icon is back! Thanks to Syn.Terra for it. 

June 08 2001 - v1.0.0 b3
  - Installation script now creates an index for the MAIL:account
    attribute.
  - mail_daemon detects if the MAIL:account exists and creates it
    if it does not.
  - Various bug fixes. *ALL* Deskbar crashes should be gone.
  - Improved Deskbar Icon menu.
  - Does not check for email immediately after starting.

June 06 2001 - v1.0.0 b2
  - Fixed lots of bugs!
  - The status window can now be made persistent.
  - E-mail preferences app works better (for some definition
    of better).

June 05 2001 - v1.0.0 b1
  - First public release.


IMPLEMENTATION:

The latest version has the following (interesting) features:

 - Add-on based architeture.
 - Fully multithreaded.
 - POP3 add-on with APOP support.
 - SMTP add-on.
 - Leave messages on server option, with optional delete messages from 
   server after deleting local message.
 - PPP connection detection.
 - Multiple accounts.
 - Addition of the Account attribute. The install script indexes it.
 - Email Filters
 - Timed email retrieval.
 - Deskbar replicant with NavMenu.
 - The status window can be made persistent.
 - Status window remembers its size and position.
 - BeMail
 - Spam Filter

TODO:

This is a partial list of what we intend to implement. Suggestions are welcome:

 - HotMail support.
 - Filter description field/attribute
 - Read initial account info from old E-mail prefs
 - "Ask before/Skip downloading messages larger than Xkb"
 - More...

OTHER STUFF:

This program was created by Dr. Zoidberg Enterprises (zoidberg@bug-
br.org.br). Special thanks goes to Todd Lair, Brad Froehle, David Reid, 
Rene Gollent and others for helping us with ideas and code. We also would 
like to thank the BeOS community in general for their support.

The cool new mail-daemon deskbar icon is a courtesy of Syn.Terra.

Copyright (c)2001 by Dr. Zoidberg Enterprises. All rights reserved.

Dr. Zoidberg Enterprises is a joint-venture between Bruno G. Albuquerque
(bga@bug-br.org.br), Nathan Whitehorn (nwhitehorn@qwest.net), Peter Folk
(pfolk@uni.uiuc.edu), Stephan Assmus (stippi@yellowbites.com), Alan Ellis, David Reid,
Axel Dörfler (axeld@pinc-software.de) and Alexander G. M. Smith (agmsmith@rogers.com).

